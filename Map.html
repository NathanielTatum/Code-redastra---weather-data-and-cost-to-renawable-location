<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cesium Map â€” Aneious</title>

  <!-- Cesium CSS (unpkg CDN) -->
  <link href="https://unpkg.com/cesium@1.113.0/Build/Cesium/Widgets/widgets.css" rel="stylesheet">

  <style>
    /* Fill the page and ensure the map container has height */
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      font-family: sans-serif;
    }
    #cesiumContainer {
      width: 100%;
      height: calc(100vh - 64px); /* leave space for header/footer if needed */
      display: block;
    }
    header {
      height: 64px;
      padding: 12px 18px;
      background: #222;
      color: #fff;
      display:flex;
      align-items:center;
      gap:16px;
    }
  </style>
</head>
<body>
  <header>
    <div style="font-size:1.25rem;font-weight:600">Aneious</div>
    <nav style="margin-left:auto">
      <a href="index.html" style="color:#fff;margin-right:12px">Home</a>
      <a href="visualization.html" style="color:#fff;margin-right:12px">Visualization</a>
      <a href="aboutus.html" style="color:#fff">About</a>
    </nav>
  </header>

  <!-- Cesium container -->
  <div id="cesiumContainer"></div>

  <!-- CesiumJS (unpkg CDN) -->
  <script src="https://unpkg.com/cesium@1.113.0/Build/Cesium/Cesium.js"></script>

  <script>
    // Optional: If you use Cesium Ion assets, set your token here:
    Cesium.Ion.defaultAccessToken = 'AIzaSyAko5Z3eEdvJ7RnXLrjvDE6KA0Bn7KUoyc';

    // Create the viewer
    const viewer = new Cesium.Viewer('cesiumContainer', {
      // Use a simple base layer provider that doesn't require Ion:
      baseLayerPicker: false,
      geocoder: false,
      timeline: false,
      animation: false,
      sceneModePicker: false,
      navigationHelpButton: false,
      infoBox: false,
      selectionIndicator: false,
      zoomControl: true
    });

    // Replace the default imagery with OpenStreetMap (optional)
    const osmProvider = new Cesium.OpenStreetMapImageryProvider({
      url: 'https://a.tile.openstreetmap.org/'
    });
    viewer.imageryLayers.removeAll();
    viewer.imageryLayers.addImageryProvider(osmProvider);

    // create with zoom control (default true)
    var leafletMap = L.map('map', {
      zoomControl: true,         // ensure present
      attributionControl: false, // optional removal
    }).setView([20, 0], 2);

    // optionally move zoom control to bottom-right
    leafletMap.zoomControl.setPosition('bottomright');

    // Add OpenStreetMap tiles as usual
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; OpenStreetMap contributors'
    }).addTo(leafletMap);
    L.control.zoom({ position: 'bottomright' }).addTo(leafletMap);

    // Set an initial camera view (lat, lon, height)
    viewer.camera.setView({
      destination: Cesium.Cartesian3.fromDegrees(-95.7129, 37.0902, 2500000) // continental US view
    });

    // Add a click handler to show coordinates and optionally create a marker
    const handler = new Cesium.ScreenSpaceEventHandler(viewer.scene.canvas);
    handler.setInputAction(function (click) {
      const pickedPosition = viewer.scene.pickPosition(click.position);
      if (!pickedPosition) {
        // In 2D/Columbus view or if pickPosition fails, fallback to globe pick
        const lon = Cesium.Math.toDegrees(cartographic.longitude).toFixed(6);
        const lat = Cesium.Math.toDegrees(cartographic.latitude).toFixed(6);
        console.log('Clicked coordinates:', lat, lon);
        displayMarker(cartesian);
        updateInputs(lat, lon);
        return;
      }
      const cartographic = Cesium.Cartographic.fromCartesian(pickedPosition);
      const lon = Cesium.Math.toDegrees(cartographic.longitude).toFixed(6);
      const lat = Cesium.Math.toDegrees(cartographic.latitude).toFixed(6);
      console.log('Clicked coordinates:', lat, lon);
      displayMarker(pickedPosition);
      updateInputs(lat, lon);
    }, Cesium.ScreenSpaceEventType.LEFT_CLICK);

    // Helper: display a simple marker (billboard) at the picked position
    let lastEntity = null;
    function displayMarker(cartesianPosition) {
      // Remove previous marker
      if (lastEntity) {
        viewer.entities.remove(lastEntity);
        lastEntity = null;
      }
      lastEntity = viewer.entities.add({
        position: cartesianPosition,
        billboard: {
          image: 'https://cdn.jsdelivr.net/gh/mapbox/maki/icons/marker-15.svg',
          verticalOrigin: Cesium.VerticalOrigin.BOTTOM,
          scale: 1.6
        }
      });
    }

    // Helper: update Longitude/Latitude inputs in the page if they exist
    function updateInputs(lat, lon) {
      const latInput = document.getElementsByName('Latitude')[0];
      const lonInput = document.getElementsByName('Longitude')[0];
      if (latInput) latInput.value = lat;
      if (lonInput) lonInput.value = lon;
      // If you have a function to refresh visualizations in your app, call it here:
      if (typeof updateVisualization === 'function') {
        try { updateVisualization(); } catch(e) { /* ignore errors */ }
      }
    }

    // Optional: Add a simple geocoder/pin example
    // viewer.entities.add({ position: Cesium.Cartesian3.fromDegrees(-0.1276, 51.5074), point: { pixelSize: 10, color: Cesium.Color.ORANGE }});
  document.getElementById('zoomIn').addEventListener('click', () => {
  const camera = viewer.camera;
  camera.zoomIn(); // convenience method; you can also change camera.position
});
document.getElementById('zoomOut').addEventListener('click', () => {
  viewer.camera.zoomOut();
});
  
  
  </script><button 
  id="zoomIn">+</button>
<button id="zoomOut">-</button>
</body>
</html>